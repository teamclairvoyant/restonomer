The authentication in restonomer is represented by abstract class `RestonomerAuthentication`:

```scala
sealed abstract class RestonomerAuthentication(val token: Option[TokenConfig]) {

  def validateCredentials(): Unit

  def authenticate(httpRequest: Request[Either[String, String], Any]): Request[Either[String, String], Any]

  def validateCredentialsAndAuthenticate(
      httpRequest: Request[Either[String, String], Any]
  ): Request[Either[String, String], Any] = {
    validateCredentials()
    authenticate(httpRequest)
  }

}
```

# Types of authentication 

The restonomer framework supports below authentication mechanisms:

* Basic Authentication
* Bearer Authentication
* API Key Authentication
* JWT Authentication

## Basic Authentication

The basic authentication in restonomer framework is represented by class `BasicAuthentication`:

```scala
case class BasicAuthentication(
    override val token: Option[TokenConfig] = None,
    basicToken: Option[String] = None,
    userName: Option[String] = None,
    password: Option[String] = None
) extends RestonomerAuthentication(token)
```

Basic authentication can be achieved in restonomer using 2 ways:

* By providing username and password

```hocon
authentication = {
 type = "basic-authentication"
 user-name = "test_user"
 password = "test_password"
}
```

* By providing basic auth token

```hocon
authentication = {
 type = "basic-authentication"
 basic-token = "abcd1234"
}
```

## Bearer Authentication

The bearer authentication in restonomer framework is represented by class `BearerAuthentication`:

```scala
case class BearerAuthentication(
    override val token: Option[TokenConfig] = None,
    bearerToken: String
) extends RestonomerAuthentication(token)
```

You would need to provide just the bearer auth token to the `authentication` configuration in checkpoint:

```hocon
authentication = {
 type = "bearer-authentication"
 bearer-token = "abcd1234"
}
```

## API Key Authentication

The API key authentication in restonomer framework is represented by class `APIKeyAuthentication`:

```scala
case class APIKeyAuthentication(
    override val token: Option[TokenConfig] = None,
    apiKeyName: String,
    apiKeyValue: String,
    placeholder: String
) extends RestonomerAuthentication(token)
```

The API key authentication config expects user to provide below 3 details:

* name of api key
* value of api key
* placeholder that denotes where to the api key to the request (query param / header / cookies)

```hocon
authentication = {
  type = "api-key-authentication"
  api-key-name = "test_api_key_name"
  api-key-value = "test_api_key_value"
  placeholder = "QueryParam"
}
```

## JWT Authentication

The JWT authentication in restonomer framework is represented by class `JWTAuthentication`:

```scala
case class JWTAuthentication(
    override val token: Option[TokenConfig] = None,
    subject: String,
    secretKey: String,
    algorithm: String = JwtAlgorithm.HS256.name,
    tokenExpiresIn: Long = 1800
) extends RestonomerAuthentication(token)
```

# Token Request

The authentication mechanism in restonomer also gives the user a provision to configure the token request. 

There are certain scenarios where you are required to provide the authentication credentials for the main data request 
from the token value generated by some other token request.

Keeping that in mind, user can configure the token request under authentication and then can use the token response for 
providing credentials in the main data request.

For example, consider the below authentication configuration: 

```hocon
authentication = {
  token = {
    token-request = {
      url = "http://localhost:8080/token-response-body"

      authentication = {
        type = "bearer-authentication"
        bearer-token = "test_token_123"
      }
    }

    token-response = {
      placeholder = "ResponseBody"
    }
  }

  type = "basic-authentication"
  basic-token = "token[secret]"
}
```

In the above example, the main data request depends on basic authentication mechanism where the basic-token value is fetched 
from the another attribute `secret` from the response generated by token request.

If you want to get the `X` attribute from the token response, then you need to mention the value in the desired credential 
field in the below format:

```text
token[X]
```

User can configure whether the token needs to be fetched from token response body or token response headers.
The `placeholder` config in `token-response` can be initialised with below 2 values: 
* `ResponseBody`
* `ResponseHeaders`

**_If the token is to be fetched from the token response body, it is assumed that the token request will always generate 
the token response in a json format that will contain the attribute required by the main data request._**

The token request follows the same structure as the main data request.